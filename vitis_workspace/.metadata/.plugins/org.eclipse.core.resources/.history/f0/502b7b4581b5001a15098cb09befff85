
//System drivers
#include "xuartps.h"
#include "xparameters.h"

//Header file for this driver
#include "uart.h"


//UART device we're targeting for initialization
#define UART_DEVICE_ID XPAR_XUARTPS_0_DEVICE_ID
XUartPs Uart_PS;		/* Instance of the UART Device */


//returns 0 on success
uint8_t uart_init()
{
	int Status;
	XUartPs_Config *Config;
	unsigned int SentCount;
	unsigned int ReceivedCount;
	u16 Index;
	u32 LoopCount = 0;

	/*
	 * Initialize the UART driver so that it's ready to use.
	 * Look up the configuration in the config table, then initialize it.
	 */
	Config = XUartPs_LookupConfig(DeviceId);
	if (NULL == Config) {
		return XST_FAILURE;
	}

	Status = XUartPs_CfgInitialize(&Uart_PS, Config, Config->BaseAddress);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}

	/* Check hardware build. */
	Status = XUartPs_SelfTest(&Uart_PS);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}

	return XST_SUCCESS;
}


uint8_t uart_send_byte(uint8_t data_byte)
{
	if(XUartPs_Send(&Uart_PS, SendBuffer, TEST_BUFFER_SIZE) != 1)
	{
		return XST_FAILURE
	}
	return XST_SUCCESS
}
